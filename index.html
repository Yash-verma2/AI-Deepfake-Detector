<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Voice Deepfake Detector</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    #progressBar {
      width: 100%;
      background-color: #333;
      height: 12px;
      border-radius: 9999px;
      overflow: hidden;
      margin-top: 20px;
    }
    #bar {
      height: 100%;
      background-color: #facc15;
      width: 0%;
      transition: width 0.5s ease;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-black text-white min-h-screen flex flex-col">

  <!-- Navigation Bar -->
  <nav class="w-full flex justify-between items-center px-6 py-4 bg-gray-800 shadow-lg sticky top-0 z-50">
    <h1 class="text-2xl font-bold tracking-wider">üîç Voice Deepfake AI</h1>
    <ul class="flex space-x-4 text-sm md:text-base">
      <a href="image_ditector"><li class="hover:text-yellow-400 cursor-pointer">Image Detector (Coming Soon)</li></a>
      <a href="/about"><li class="hover:text-yellow-400 cursor-pointer">About Us</li></a>
      <a href="/team" class="hover:text-yellow-400">Team / Credits</a>

    </ul>
  </nav>

  <!-- Header Section -->
  <header class="text-center mt-10 px-4">
    <h2 class="text-4xl md:text-5xl font-extrabold mb-4">Detect Deepfakes Instantly</h2>
    <p class="text-lg text-gray-300">Upload a voice clip and find out if it's real or AI-generated.</p>
  </header>

  <!-- Upload Section -->
  <section class="mt-12 flex flex-col items-center flex-grow">
    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js" type="module" ></script>
<dotlottie-wc 
  src="https://lottie.host/46858c51-2e2e-4d9c-8ad1-e8f0dbcaebe8/BXM6uvolee.lottie" 
  style="width: 250px; height: 250px" 
  autoplay loop speed="1">
</dotlottie-wc>

    <form id="uploadForm" class="bg-gray-800 p-6 rounded-xl shadow-xl w-[90%] max-w-xl" enctype="multipart/form-data" method="POST">
      <input type="file" name="audio" accept="audio/*" required class="w-full mb-4 p-2 rounded bg-gray-700" />
      <button type="submit" class="bg-yellow-400 text-black font-bold px-6 py-2 rounded-lg hover:bg-yellow-300 transition-all duration-300 w-full">
        Analyze Voice
      </button>
    </form>

    <!-- Progress Bar -->
    <div id="progressBar" class="w-[90%] max-w-xl mt-6 hidden">
      <div id="bar"></div>
    </div>

    <!-- Result Section -->
    <div id="result" class="mt-10 hidden text-center p-6 rounded-lg bg-gray-800 shadow-lg border border-yellow-500 w-[90%] max-w-xl">
      <h3 class="text-xl font-bold mb-2">Result:</h3>
      <p id="resultText" class="text-2xl mt-2 font-semibold"></p>
      <p id="confidenceText" class="text-sm text-gray-400 mt-1"></p>
      <canvas id="confidenceChart" width="200" height="200" class="mx-auto mt-6"></canvas>
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center mt-20 text-gray-500 text-sm pb-10">
    Made with ‚ù§Ô∏è by Yash | Future-ready AI Tools
  </footer>

  <!-- JavaScript -->
  <script>
    const form = document.getElementById('uploadForm');
    const resultBox = document.getElementById('result');
    const resultText = document.getElementById('resultText');
    const confidenceText = document.getElementById('confidenceText');
    const progressBar = document.getElementById('progressBar');
    const bar = document.getElementById('bar');

    let chart;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      resultBox.classList.add('hidden');
      resultText.innerText = "";
      confidenceText.innerText = "";
      progressBar.classList.remove('hidden');
      bar.style.width = '0%';

      let progress = 0;
      const interval = setInterval(() => {
        if (progress < 90) {
          progress += 10;
          bar.style.width = progress + '%';
        }
      }, 300);

      try {
        const res = await fetch("/", {
          method: "POST",
          headers: { "X-Requested-With": "XMLHttpRequest" },
          body: formData
        });
        const data = await res.json();

        clearInterval(interval);
        bar.style.width = '100%';

        resultText.innerText = data.prediction === 'FAKE' ? 'üö® Deepfake Detected!' : '‚úÖ Real Human Voice';
        confidenceText.innerText = `Confidence: ${data.confidence}%`;
        resultBox.classList.remove('hidden');

        // Draw circular confidence meter
        if (chart) chart.destroy();
        chart = new Chart(document.getElementById('confidenceChart'), {
          type: 'doughnut',
          data: {
            labels: ['Confidence', 'Remaining'],
            datasets: [{
              label: 'Confidence',
              data: [data.confidence, 100 - data.confidence],
              backgroundColor: [
                data.prediction === 'FAKE' ? '#ef4444' : '#10b981',
                '#374151'
              ],
              borderWidth: 1
            }]
          },
          options: {
            cutout: '70%',
            plugins: {
              legend: { display: false },
              tooltip: { enabled: false }
            }
          }
        });
      } catch (err) {
        clearInterval(interval);
        bar.style.width = '0%';
        resultText.innerText = "‚ùå Error analyzing file.";
        resultBox.classList.remove('hidden');
      }
    });
  </script>
</body>
</html>
